(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var n=a.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"assets/39fa48658417d2b35653.jpg",a=e.p+"assets/810202758b85258012a4.png",n=e.p+"assets/4e7419e4378ebd53e6ad.png",r=e.p+"assets/e131dbd25d7b7b60e59f.png",i=e.p+"assets/8e98dd7ef7071c5b4519.png",o=e.p+"assets/e8bac593a0b4867f1940.png",d=e.p+"assets/751ec37c0e351909a9e6.png",c=e.p+"assets/a1e7e8072b3c12c7edc2.png",h=e.p+"assets/1b432af58ca1e7729de4.mp3",s=e.p+"assets/4e0a1fe5914bd9335355.mp3";var g=0,m=0,l=60,p=50,u=document.querySelector("#count"),w=document.querySelector("#game-over"),y=document.querySelector("#reload"),f=document.querySelector("#game-start"),x=document.querySelector("#start"),v=document.querySelector("#record");window.onload=function(){localStorage.getItem("record")?v.textContent="Рекорд: ".concat(localStorage.getItem("record")):localStorage.setItem("record",0)},x.onclick=function(){f.remove(),b.style.cursor="none",T()},y.onclick=function(){return location.reload()};var S=[a,n,r,i],b=document.getElementById("canvas"),I=b.getContext("2d");b.addEventListener("mousemove",(function(e){Y.x=e.offsetX-Y.width/2}));var M=new Image;M.src=t;var q=new Image;q.src=o;var A=new Image;A.src=d;var X=new Image;X.src=c;var E,F=[],k=[],C=[],Y={x:(b.width-60)/2,y:b.height-40,width:60,height:25,life:!0},j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function T(){$(),z(),Y.life&&(E=j(T))}(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame)(E);var $=function(){R(),B(),L()},z=function(){I.drawImage(M,0,0,b.width,b.height),I.drawImage(q,Y.x,Y.y,Y.width,Y.height),k.forEach((function(e){return I.drawImage(A,e.x,e.y,e.width,e.height)})),F.forEach((function(e){I.save(),I.translate(e.x+e.width/2,e.y+e.height/2),I.rotate(e.angle),I.drawImage(e.image,-e.width/2,-e.height/2,e.width,e.height),I.restore()})),C.forEach((function(e){return I.drawImage(X,125*Math.floor(e.animX),125*Math.floor(e.animY),125,125,e.x,e.y,100,100)}))},B=function(){for(var e in C){var t=C[e];t.animX+=.5,t.animX>3&&(t.animY++,t.animX=0),t.animY>3&&C.splice(e,1)}},R=function(){if(++m%480==0&&(10!==l&&(l-=5),30!==p&&(p-=5)),m%l==0){var e=Math.round(34.5+21*Math.random()),t=new Image,a=Math.round(Math.random()*(S.length-0-1+1)-.5);t.src=S[a],F.push({image:t,angle:0,angleX:.2*Math.random()-.1,x:Math.random()*(b.width-50),y:-40,xSpeed:Math.round(.5+5*Math.random()),ySpeed:Math.round(1.5+3*Math.random()),width:e,height:e,del:!1})}m%p==0&&(k.push({x:Y.x+10,y:Y.y-Y.height,xSpeed:0,ySpeed:-5,width:40,height:40}),10===l&&k.push({x:Y.x+10,y:Y.y-Y.height,xSpeed:.7,ySpeed:-5,width:40,height:40},{x:Y.x+10,y:Y.y-Y.height,xSpeed:-.7,ySpeed:-5,width:40,height:40}),new Audio(s).play())},L=function(){for(var e in k){var t=k[e];t.y+=t.ySpeed,t.x+=t.xSpeed,t.y<=0&&k.splice(e,1)}for(var a in F){var n=F[a];for(var r in n.x+=n.xSpeed,n.y+=n.ySpeed,n.angle+=n.angleX,(n.x>=b.width-50||n.x<=0)&&(n.xSpeed=-n.xSpeed),n.y>=b.height&&F.splice(a,1),k){var i=k[r];if(Math.abs(n.x+n.width/2-i.x-i.width/2)<n.width&&Math.abs(n.y-i.y-i.height)<n.height){C.push({x:n.x-n.width/2,y:n.y-n.height,animX:0,animY:0}),new Audio(h).play(),g++,u.textContent=g,n.del=!0,k.splice(r,1);break}if(Math.abs(n.x+n.width/2-Y.x-Y.width/2)<n.width&&Math.abs(n.y-Y.y)<n.height){Y.life=!1,w.style.display="flex",b.style.cursor="auto";var o=localStorage.getItem("record");o&&+o<g&&localStorage.setItem("record",g)}}n.del&&F.splice(a,1)}}})();